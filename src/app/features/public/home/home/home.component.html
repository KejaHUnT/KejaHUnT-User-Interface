<div class="container my-5">
  <div class="row g-4">
    <ng-container *ngIf="Property$ | async as properties">
      <div class="col-12 col-md-6 col-lg-4" *ngFor="let property of properties">
        <div class="card h-100 shadow-sm border-0 rounded-4 property-card"
          [routerLink]="['property/details/', property.id]">
          <!-- Image -->
          <div class="property-image-container">
            <img *ngIf="imageUrls[property.id]" [src]="imageUrls[property.id]" alt="{{ property.name }}"
              class="card-img-top rounded-top-4">
            <div *ngIf="!imageUrls[property.id]" class="no-image-placeholder rounded-top-4">
              <span>No Image</span>
            </div>
          </div>

          <!-- Info Section -->
          <div class="p-3 d-flex flex-column justify-content-between flex-grow-1">
            <!-- Title and Location -->
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h5 class="fw-bold text-primary mb-1">{{ property.name }}</h5>
                <p class="text-muted mb-0">
                  <i class="bi bi-geo-alt-fill text-danger me-1"></i>{{ property.location }}
                </p>
              </div>
              <span class="badge bg-light text-dark">{{ property.type }}</span>
            </div>

            <!-- Highlight Unit (only show first) -->
            <!-- Highlight Unit (only show first) -->
            <div *ngIf="property.units.length > 0" class="unit-info-container mt-3">
              <div class="unit-info-item">
                <i class="bi bi-currency-dollar text-success me-2"></i>
                <span class="fw-semibold">Ksh {{ property.units[0].price | number:'1.0-0' }}</span>
              </div>
              <div class="unit-info-item">
                <i class="bi bi-aspect-ratio text-primary me-2"></i>
                <span>{{ property.units[0].size }} mÂ²</span>
              </div>
              <div class="unit-info-item">
                <i class="bi bi-house-door-fill text-warning me-2"></i>
                <span>{{ property.units[0].type }}</span>
              </div>
            </div>

          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>