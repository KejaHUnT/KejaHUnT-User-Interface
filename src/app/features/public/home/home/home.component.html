<div class="container my-5">
  <div class="row g-4">
    <ng-container *ngIf="Property$ | async as properties">
      <div class="col-12 col-md-6 col-xl-4" *ngFor="let property of properties">
        <div class="card h-100 border-0 rounded-4 property-card" [routerLink]="['property/details/', property.id]">

          <!-- Image Section -->
          <div class="property-image-container">
            <img *ngIf="imageUrls[property.id]" [src]="imageUrls[property.id]" alt="{{ property.name }}"
              class="card-img-top rounded-top-4">
            <div *ngIf="!imageUrls[property.id]" class="no-image-placeholder rounded-top-4">
              <i class="bi bi-building"></i>
              <span>No Image</span>
            </div>

            <!-- Property Type Badge -->
            <div class="property-type-badge">
              <span class="badge bg-primary">{{ property.type }}</span>
            </div>
          </div>

          <!-- Main Info -->
          <div class="card-body p-3">
            <h5 class="property-title">{{ property.name }}</h5>
            <div class="property-location mb-2">
              <i class="bi bi-geo-alt-fill me-2"></i>
              {{ property.location }}
            </div>

            <!-- Starting Price -->
            <div class="price-section mt-3" *ngIf="property.units && property.units.length">
              <div class="price-range">
                <span class="price-from">From</span>
                <span class="price-amount">Ksh {{ getMinPrice(property.units) | number:'1.0-0' }}</span>
                <span class="price-period">/month</span>
              </div>
              <div class="unit-count text-light small" *ngIf="property.units.length > 1">
                {{ property.units.length }} Units
              </div>
            </div>

            <!-- CTA Button -->
            <div class="text-end mt-4">
              <div class="view-details-btn d-inline-flex align-items-center">
                View Details <i class="bi bi-arrow-right-circle-fill ms-2"></i>
              </div>
            </div>
          </div>
          
        </div>
      </div>
    </ng-container>
  </div>
</div>
