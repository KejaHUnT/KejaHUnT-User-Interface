<div class="unit-payment-dashboard">

    <div class="dashboard-header">
        <h3 class="title text-xl-center mt-3 mb-3">💳 Unit Payment Overview</h3>
    </div>

    <div class="three-panel-layout">

        <!-- Left Panel: Unit Details -->
        <div class="panel panel-left">
            <h3>🏠 Unit Details</h3>
            <!-- <div *ngIf="unit">
          <p><strong>Unit ID:</strong> {{ unit.id }}</p>
          <p><strong>Name:</strong> {{ unit.name }}</p>
          <p><strong>Door No:</strong> {{ unit.doorNumber }}</p>
          <p><strong>Size:</strong> {{ unit.size }} sqft</p>
          <p><strong>Status:</strong> {{ unit.status }}</p>
          <p><strong>Monthly Rent:</strong> {{ unit.price | currency }}</p>
        </div> -->
        </div>

        <!-- Middle Panel: Monthly Payment Analytics -->
        <div class="panel panel-middle">
            <h3>📊 Monthly Payment Analytics</h3>
            <div class="chart-container">
                <!-- Replace this with a real chart later -->
                <p style="text-align:center; padding: 2rem;">[Monthly Payment Chart Here]</p>
            </div>
        </div>

        <!-- Right Panel: Suggested Feature -->
        <div class="panel panel-right">
            <h3>💡 Rent Trend Predictor</h3>
            <!-- <p>
          Analyze tenant payment behavior to predict next payment delays or regularity.
          <br><br>
          <strong>Last Paid:</strong> {{ lastPayment?.createdAt | date: 'MMM dd, y' }} <br>
          <strong>Status:</strong>
          <span [ngClass]="{
            'status-paid': lastPayment?.status === 'Success',
            'status-cancelled': lastPayment?.status === 'Canceled',
            'status-pending': lastPayment?.status !== 'Success' && lastPayment?.status !== 'Canceled'
          }">
            {{ lastPayment?.status || 'N/A' }}
          </span>
        </p> -->
        </div>

    </div>

    <!-- Payment Table Below -->
    <div class="payment-table-section mb-5" *ngIf="payments && payments.length > 0">
        <h3 class="table-title text-md-center">📂 Payment History</h3>
        <div class="table-wrapper">
            <table class="payment-table">
                <thead>
                    <tr>
                        <th>Amount</th>
                        <th>Status</th>
                        <th>Date Paid</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let payment of payments" [ngClass]="{
                'row-paid': payment.status === 'Success',
                'row-cancelled': payment.status === 'Canceled',
                'row-pending': payment.status && payment.status !== 'Success' && payment.status !== 'Canceled'
              }">
                        <td>KSH{{ payment.amount | number:'1.0-0' }}</td>
                        <td>
                            <span [ngClass]="{
                'status-paid': payment.status === 'Success',
                'status-cancelled': payment.status === 'Canceled',
                'status-pending': payment.status !== 'Success' && payment.status !== 'Canceled'
                        }">
                                {{ payment.status }}
                            </span>
                        </td>
                        <td>{{ payment.createdAt | date: 'shortDate' }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="payments.length === 0" class="no-payments">
        <p>No payments found for this unit.</p>
    </div>


    <div *ngIf="payments.length === 0" class="no-payments">
        <p>No payments found for this unit.</p>
    </div>

</div>